# 로그인 리다이렉트 테스트 가이드

## 수정 사항 요약

로그인 후 리다이렉트가 v2로 하드코딩되어 있던 문제를 수정했습니다.

### 수정된 파일
1. `frontend/pages/login.js`
   - 소셜 로그인 (카카오) 리다이렉트
   - 이메일 로그인 리다이렉트
   - 개발 모드 로그인 리다이렉트

2. `frontend/pages/kakao-callback.js`
   - 카카오 콜백 리다이렉트

### 변경 내용
- 하드코딩된 `/v2/scanner-v2` → `/bottom-nav-link` API 호출로 동적 결정
- v3 설정일 때 `/v3/scanner-v3`로 리다이렉트
- v2 설정일 때 `/v2/scanner-v2`로 리다이렉트
- API 호출 실패 시 기본값(`/v2/scanner-v2`) 사용

## 브라우저 테스트 방법

### 1. 백엔드 설정 확인
```bash
# 백엔드에서 active_engine이 v3로 설정되어 있는지 확인
curl http://localhost:8010/bottom-nav-link
```

예상 응답 (v3 설정 시):
```json
{
  "link_type": "v3",
  "link_url": "/v3/scanner-v3"
}
```

### 2. 로그인 테스트 시나리오

#### 시나리오 1: 카카오 소셜 로그인
1. 브라우저에서 `http://localhost:3000/login` 접속
2. "카카오로 로그인" 버튼 클릭
3. 카카오 로그인 완료
4. **확인**: `/v3/scanner-v3`로 리다이렉트되는지 확인

#### 시나리오 2: 이메일 로그인
1. 브라우저에서 `http://localhost:3000/login` 접속
2. 이메일/비밀번호 입력 후 로그인
3. **확인**: `/v3/scanner-v3`로 리다이렉트되는지 확인

#### 시나리오 3: 카카오 콜백
1. 카카오 로그인 후 콜백 URL로 이동
2. **확인**: `/v3/scanner-v3`로 리다이렉트되는지 확인

#### 시나리오 4: 개발 모드 로그인
1. 개발 환경에서 개발 모드 로그인 버튼 클릭
2. **확인**: `/v3/scanner-v3`로 리다이렉트되는지 확인

### 3. 브라우저 콘솔 확인
브라우저 개발자 도구(F12) → Console 탭에서 다음을 확인:

1. API 호출 확인:
   ```
   GET http://localhost:8010/bottom-nav-link
   ```

2. 리다이렉트 확인:
   ```
   router.push('/v3/scanner-v3')
   ```

3. 에러 확인:
   - API 호출 실패 시 기본값 사용 로그
   - 네트워크 에러 메시지

### 4. v2 설정으로 변경 테스트
백엔드에서 active_engine을 v2로 변경 후:
1. 로그인 시도
2. **확인**: `/v2/scanner-v2`로 리다이렉트되는지 확인

### 5. API 실패 시나리오 테스트
백엔드 서버를 중지한 후:
1. 로그인 시도
2. **확인**: 기본값(`/v2/scanner-v2`)으로 리다이렉트되는지 확인

## 예상 결과

### v3 설정일 때
- 모든 로그인 방법에서 `/v3/scanner-v3`로 리다이렉트
- 브라우저 주소창에 `/v3/scanner-v3` 표시
- v3 스캐너 화면이 정상적으로 표시

### v2 설정일 때
- 모든 로그인 방법에서 `/v2/scanner-v2`로 리다이렉트
- 브라우저 주소창에 `/v2/scanner-v2` 표시
- v2 스캐너 화면이 정상적으로 표시

### API 실패 시
- 기본값(`/v2/scanner-v2`)으로 리다이렉트
- 콘솔에 에러 로그 표시
- v2 스캐너 화면이 정상적으로 표시

## 체크리스트

- [ ] 카카오 소셜 로그인 → v3 리다이렉트 확인
- [ ] 이메일 로그인 → v3 리다이렉트 확인
- [ ] 카카오 콜백 → v3 리다이렉트 확인
- [ ] 개발 모드 로그인 → v3 리다이렉트 확인
- [ ] v2 설정 변경 후 → v2 리다이렉트 확인
- [ ] API 실패 시 → 기본값 리다이렉트 확인
- [ ] 브라우저 콘솔 에러 없음 확인


