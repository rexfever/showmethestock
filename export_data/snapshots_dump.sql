PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE scan_rank(date TEXT, code TEXT, score REAL, flags TEXT, score_label TEXT, close_price REAL, PRIMARY KEY(date, code));
INSERT INTO scan_rank VALUES('2025-08-28','329180',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-28','466920',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-28','077970',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-28','085310',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-28','009540',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-28','042660',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-28','035720',8.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-28','005930',7.0,'{}','관심',0.0);
INSERT INTO scan_rank VALUES('2025-08-28','097230',7.0,'{}','관심',0.0);
INSERT INTO scan_rank VALUES('2025-08-28','005935',7.0,'{}','관심',0.0);
INSERT INTO scan_rank VALUES('2025-08-25','252670',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-25','114800',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-25','278470',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-25','042660',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-25','466920',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-25','329180',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-25','494670',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-25','005930',7.0,'{}','관심',0.0);
INSERT INTO scan_rank VALUES('2025-08-25','015760',7.0,'{}','관심',0.0);
INSERT INTO scan_rank VALUES('2025-08-25','009540',7.0,'{}','관심',0.0);
INSERT INTO scan_rank VALUES('2025-08-25','005935',7.0,'{}','관심',0.0);
INSERT INTO scan_rank VALUES('2025-08-29','329180',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-29','009540',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-29','077970',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-29','494670',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-29','097230',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-29','006400',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-29','086280',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-29','466920',8.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-29','005935',8.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-29','075580',0.0,'{}','None',0.0);
INSERT INTO scan_rank VALUES('2025-08-22','252670',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-22','005930',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-22','466920',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-22','015760',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-22','381170',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-22','329180',7.0,'{}','관심',0.0);
INSERT INTO scan_rank VALUES('2025-08-22','278470',7.0,'{}','관심',0.0);
INSERT INTO scan_rank VALUES('2025-08-22','003230',7.0,'{}','관심',0.0);
INSERT INTO scan_rank VALUES('2025-08-19','381170',11.999999999999999644,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-19','305720',11.999999999999999644,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-19','010140',11.000000000000000888,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-19','466920',11.000000000000000888,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-19','329180',11.000000000000000888,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-19','005935',11.000000000000000888,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-19','298040',11.000000000000000888,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-19','360750',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-19','267260',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-19','042660',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-19','047810',0.0,'{}','제외',0.0);
INSERT INTO scan_rank VALUES('2025-08-20','466920',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-20','005935',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-20','360750',8.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-20','381170',8.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-20','298040',8.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-20','006400',8.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-20','329180',8.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-20','379800',8.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-20','042660',7.0,'{}','관심',0.0);
INSERT INTO scan_rank VALUES('2025-08-21','252670',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-21','381170',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-21','466920',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-21','005935',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-21','015760',8.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-21','007660',8.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-21','278470',7.0,'{}','관심',0.0);
INSERT INTO scan_rank VALUES('2025-08-30','329180',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-30','009540',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-30','077970',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-30','494670',10.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-30','097230',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-30','006400',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-30','086280',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-30','466920',8.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-30','005935',8.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-30','075580',0.0,'{}','None',0.0);
INSERT INTO scan_rank VALUES('2025-08-26','042660',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-26','466920',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-26','009540',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-26','329180',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-26','005935',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-26','278470',8.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-26','005930',7.0,'{}','관심',0.0);
INSERT INTO scan_rank VALUES('2025-08-26','006400',7.0,'{}','관심',0.0);
INSERT INTO scan_rank VALUES('2025-08-27','005930',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-27','329180',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-27','042660',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-27','466920',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-27','278470',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-27','006400',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-27','085310',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-27','011070',9.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-27','009540',8.0,'{}','강한 매수',0.0);
INSERT INTO scan_rank VALUES('2025-08-27','373220',0.0,'{}','None',0.0);
CREATE TABLE send_logs(ts TEXT, to_no TEXT, matched_count INTEGER);
INSERT INTO send_logs VALUES('2025-09-08T22:28:18','010-4220-0956',7);
INSERT INTO send_logs VALUES('2025-09-09T21:28:16','01012345678',9);
CREATE TABLE positions_old(
  id INT,
  ticker TEXT,
  name TEXT,
  entry_date TEXT,
  entry_price REAL,
  quantity INT,
  exit_date TEXT,
  exit_price REAL,
  current_price REAL,
  return_pct REAL,
  return_amount REAL,
  status TEXT,
  created_at TEXT,
  updated_at TEXT
);
INSERT INTO positions_old VALUES(1,'252670','KODEX 200선물인버스2X','2025-09-04',1308.9999999999999413,10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-04 14:03:22','2025-09-04 14:03:22');
INSERT INTO positions_old VALUES(2,'009150','삼성전기','2025-09-04',174199.99999999999928,10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-04 14:03:32','2025-09-04 14:03:32');
INSERT INTO positions_old VALUES(3,'251340','KODEX 코스닥150선물인버스','2025-09-04',3459.9999999999999644,10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-04 14:03:36','2025-09-04 14:03:36');
INSERT INTO positions_old VALUES(4,'423160','KODEX KOFR금리액티브(합성)','2025-09-05',110674.99999999999005,10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-05 13:00:13','2025-09-05 13:00:13');
INSERT INTO positions_old VALUES(5,'077970','STX엔진','2025-09-05',44500.000000000001776,10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-05 13:08:50','2025-09-05 13:08:50');
INSERT INTO positions_old VALUES(6,'071970','HD현대마린엔진','2025-09-05',93100.000000000004973,10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-05 13:09:57','2025-09-05 13:09:57');
INSERT INTO positions_old VALUES(7,'459580','KODEX CD금리액티브(합성)','2025-09-08',1073984.9999999999674,10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 14:01:25','2025-09-08 14:01:25');
INSERT INTO positions_old VALUES(8,'329180','HD현대중공업','2025-09-08',512999.99999999998934,10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 14:01:46','2025-09-08 14:01:46');
INSERT INTO positions_old VALUES(9,'082740','한화엔진','2025-09-08',45599.999999999996092,10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 14:01:49','2025-09-08 14:01:49');
INSERT INTO positions_old VALUES(10,'251270','넷마블','2025-09-08',60800.00000000000071,10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 14:02:39','2025-09-08 14:02:39');
INSERT INTO positions_old VALUES(11,'000180','성창기업지주','2025-09-08',1716.0000000000000142,10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 22:46:17','2025-09-08 22:46:17');
INSERT INTO positions_old VALUES(12,'000320','노루홀딩스','2025-09-08',35049.999999999998934,10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 22:46:25','2025-09-08 22:46:25');
INSERT INTO positions_old VALUES(13,'001080','만호제강','2025-09-08',29199.999999999999289,10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 22:47:00','2025-09-08 22:47:00');
INSERT INTO positions_old VALUES(14,'001390','KG케미칼','2025-09-08',4730.0000000000004263,10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 22:47:12','2025-09-08 22:47:12');
CREATE TABLE positions(
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            ticker TEXT NOT NULL,
            name TEXT NOT NULL,
            entry_date TEXT NOT NULL,
            quantity INTEGER NOT NULL,
            score INTEGER,
            strategy TEXT,
            current_return_pct REAL,
            max_return_pct REAL,
            exit_date TEXT,
            status TEXT DEFAULT 'open',
            created_at TEXT DEFAULT CURRENT_TIMESTAMP,
            updated_at TEXT DEFAULT CURRENT_TIMESTAMP
        );
INSERT INTO positions VALUES(1,'252670','KODEX 200선물인버스2X','2025-09-04',10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-04 14:03:22','2025-09-04 14:03:22');
INSERT INTO positions VALUES(2,'009150','삼성전기','2025-09-04',10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-04 14:03:32','2025-09-04 14:03:32');
INSERT INTO positions VALUES(3,'251340','KODEX 코스닥150선물인버스','2025-09-04',10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-04 14:03:36','2025-09-04 14:03:36');
INSERT INTO positions VALUES(4,'423160','KODEX KOFR금리액티브(합성)','2025-09-05',10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-05 13:00:13','2025-09-05 13:00:13');
INSERT INTO positions VALUES(5,'077970','STX엔진','2025-09-05',10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-05 13:08:50','2025-09-05 13:08:50');
INSERT INTO positions VALUES(6,'071970','HD현대마린엔진','2025-09-05',10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-05 13:09:57','2025-09-05 13:09:57');
INSERT INTO positions VALUES(7,'459580','KODEX CD금리액티브(합성)','2025-09-08',10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 14:01:25','2025-09-08 14:01:25');
INSERT INTO positions VALUES(8,'329180','HD현대중공업','2025-09-08',10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 14:01:46','2025-09-08 14:01:46');
INSERT INTO positions VALUES(9,'082740','한화엔진','2025-09-08',10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 14:01:49','2025-09-08 14:01:49');
INSERT INTO positions VALUES(10,'251270','넷마블','2025-09-08',10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 14:02:39','2025-09-08 14:02:39');
INSERT INTO positions VALUES(11,'000180','성창기업지주','2025-09-08',10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 22:46:17','2025-09-08 22:46:17');
INSERT INTO positions VALUES(12,'000320','노루홀딩스','2025-09-08',10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 22:46:25','2025-09-08 22:46:25');
INSERT INTO positions VALUES(13,'001080','만호제강','2025-09-08',10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 22:47:00','2025-09-08 22:47:00');
INSERT INTO positions VALUES(14,'001390','KG케미칼','2025-09-08',10,NULL,NULL,NULL,NULL,NULL,'open','2025-09-08 22:47:12','2025-09-08 22:47:12');
INSERT INTO positions VALUES(15,'010140','삼성중공업','2025-09-10',10,10,'거래확대 / 상승 추세 정착(4/5)',NULL,NULL,NULL,'open','2025-09-10 12:52:37','2025-09-10 12:52:37');
INSERT INTO positions VALUES(16,'077970','STX엔진','2025-09-10',10,10,'모멘텀 양전환 / 거래확대 / 상승 추세 정착(5/5)',NULL,NULL,NULL,'open','2025-09-10 12:52:41','2025-09-10 12:52:41');
INSERT INTO positions VALUES(17,'005380','현대차','2025-09-11',10,9,'강한 매수',NULL,NULL,NULL,'open','2025-09-11 13:04:50','2025-09-11 13:04:50');
INSERT INTO positions VALUES(18,'086280','현대글로비스','2025-09-11',10,9,'강한 매수',NULL,NULL,NULL,'open','2025-09-11 13:05:26','2025-09-11 13:05:26');
INSERT INTO positions VALUES(19,'085310','엔케이','2025-09-11',10,8,'강한 매수',NULL,NULL,NULL,'open','2025-09-11 13:05:41','2025-09-11 13:05:41');
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    email TEXT UNIQUE NOT NULL,
    phone TEXT,
    notification_enabled BOOLEAN DEFAULT 0,
    created_at TEXT DEFAULT CURRENT_TIMESTAMP,
    updated_at TEXT DEFAULT CURRENT_TIMESTAMP
, name TEXT, provider TEXT DEFAULT 'local', provider_id TEXT, membership_tier TEXT DEFAULT 'free', subscription_status TEXT DEFAULT 'active', subscription_expires_at TEXT, payment_method TEXT, is_admin BOOLEAN DEFAULT 0, last_login TIMESTAMP, is_active BOOLEAN DEFAULT 1, password_hash TEXT, is_email_verified BOOLEAN DEFAULT 0);
INSERT INTO users VALUES(1,'test1@example.com','010-1234-5678',1,'2025-09-14 01:35:08','2025-09-14 01:35:08',NULL,'local',NULL,'free','active',NULL,NULL,0,NULL,1,NULL,0);
INSERT INTO users VALUES(2,'test2@example.com','010-9876-5432',1,'2025-09-14 01:35:08','2025-09-14 01:35:08',NULL,'local',NULL,'free','active',NULL,NULL,0,NULL,1,NULL,0);
INSERT INTO users VALUES(3,'test3@example.com','010-5555-1234',0,'2025-09-14 01:35:08','2025-09-14 01:35:08',NULL,'local',NULL,'free','active',NULL,NULL,0,NULL,1,NULL,0);
INSERT INTO users VALUES(6,'test@test.com',NULL,0,'2025-09-20 15:14:25','2025-09-20 15:14:25','Test User','kakao','test123','free','active',NULL,NULL,0,NULL,1,NULL,0);
INSERT INTO users VALUES(7,'emozero@naver.com',NULL,0,'2025-09-20 15:21:47','2025-09-20 15:21:47','손진형','kakao','4456585023','premium','active',NULL,NULL,1,'2025-09-23 15:40:16',1,NULL,0);
CREATE TABLE subscriptions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    plan_id TEXT NOT NULL,
    payment_id TEXT,
    amount INTEGER NOT NULL,
    status TEXT NOT NULL DEFAULT 'active',
    started_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    expires_at TIMESTAMP NOT NULL,
    cancelled_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users (id)
);
CREATE TABLE payments (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    subscription_id INTEGER,
    payment_id TEXT NOT NULL,
    amount INTEGER NOT NULL,
    method TEXT NOT NULL,
    status TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users (id),
    FOREIGN KEY (subscription_id) REFERENCES subscriptions (id)
);
DELETE FROM sqlite_sequence;
INSERT INTO sqlite_sequence VALUES('positions',19);
INSERT INTO sqlite_sequence VALUES('users',7);
COMMIT;
