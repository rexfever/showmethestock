# Step별 유효성 분석

## 📊 검증 데이터 요약

### 실제 검증된 Step

| Step | 사용 날짜 | 종목 수 | 평균 수익률 | 승률 | 평가 |
|------|----------|---------|------------|------|------|
| Step 0 | 2025-10-28 | 2개 | **+3.26%** | 50% | ✅ **우수** |
| Step 7 | 2025-10-27, 10-30 | 2개 | +0.80% | 50% | ⚠️ **보통** |

**참고**: Step 7은 실제로 Step 6의 결과를 강제로 사용한 것입니다.

## 🔍 Step별 설정 및 예상 유효성

### Step 0: 기본 조건 (10점 이상만)
```python
{}  # 기본 설정 그대로
```
- **점수 기준**: 10점 이상
- **지표 완화**: 없음
- **검증 결과**: 평균 +3.26% ✅
- **유효성**: ✅ **매우 유효**

### Step 1: 지표 완화 Level 1 + 10점 이상
```python
{"min_signals": 3, "vol_ma5_mult": 2.0}
```
- **점수 기준**: 10점 이상
- **지표 완화**: 신호 3개, 거래량 MA5의 2.0배
- **검증 결과**: 데이터 없음
- **예상 유효성**: ✅ **유효** (Step 0와 유사한 품질 유지)

### Step 2: 지표 완화 Level 1 + 8점 이상
```python
{"min_signals": 3, "vol_ma5_mult": 2.0}  # Step 1과 동일, 점수만 8점으로 완화
```
- **점수 기준**: 8점 이상 (완화)
- **지표 완화**: 신호 3개, 거래량 MA5의 2.0배
- **검증 결과**: 데이터 없음
- **예상 유효성**: ⚠️ **보통** (점수 완화로 품질 저하 가능)

### Step 3: 지표 완화 Level 2 + 8점 이상
```python
{"min_signals": 2, "vol_ma5_mult": 1.8}
```
- **점수 기준**: 8점 이상
- **지표 완화**: 신호 2개, 거래량 MA5의 1.8배
- **검증 결과**: 데이터 없음
- **예상 유효성**: ⚠️ **보통** (지표 추가 완화)

### Step 4: 지표 완화 Level 3 + 8점 이상
```python
{"min_signals": 2, "vol_ma5_mult": 1.5, "vol_ma20_mult": 1.1}
```
- **점수 기준**: 8점 이상
- **지표 완화**: 신호 2개, 거래량 MA5의 1.5배, MA20의 1.1배
- **검증 결과**: 데이터 없음
- **예상 유효성**: ⚠️ **낮음** (과도한 완화)

### Step 5: 지표 완화 Level 4 + 8점 이상
```python
{"min_signals": 2, "vol_ma5_mult": 1.5, "gap_max": 0.025, "ext_from_tema20_max": 0.025}
```
- **점수 기준**: 8점 이상
- **지표 완화**: 갭/이격 범위 완화
- **검증 결과**: 데이터 없음
- **예상 유효성**: ❌ **낮음** (과도한 완화)

### Step 6: 지표 완화 Level 5 + 8점 이상
```python
{"min_signals": 1, "vol_ma5_mult": 1.3, "require_dema_slope": "optional"}
```
- **점수 기준**: 8점 이상
- **지표 완화**: 최소 신호 1개, 거래량 MA5의 1.3배, DEMA 슬로프 선택적
- **검증 결과**: Step 7로 표시됨 (평균 +0.80%)
- **유효성**: ⚠️ **보통** (품질 저하)

### Step 7: 강제 사용 (실제로는 Step 6 결과)
- **설명**: 모든 단계에서 목표 미달 시 마지막 결과 강제 사용
- **검증 결과**: 평균 +0.80% (Step 0의 25% 수준)
- **유효성**: ❌ **비권장** (품질 저하)

## 📈 Step별 유효성 평가

### ✅ **유효한 Step (권장)**

| Step | 평가 | 이유 |
|------|------|------|
| **Step 0** | ✅ **매우 유효** | 평균 +3.26%, 품질 우수 |
| **Step 1** | ✅ **유효** | Step 0와 유사한 품질 예상 |

### ⚠️ **제한적 유효 Step (조건부 사용)**

| Step | 평가 | 이유 |
|------|------|------|
| **Step 2** | ⚠️ **보통** | 점수 완화로 품질 저하 가능 |
| **Step 3** | ⚠️ **보통** | 지표 추가 완화 |

### ❌ **비권장 Step (품질 저하)**

| Step | 평가 | 이유 |
|------|------|------|
| **Step 4** | ❌ **낮음** | 과도한 완화 |
| **Step 5** | ❌ **낮음** | 과도한 완화 |
| **Step 6** | ❌ **낮음** | 최대 완화, 품질 저하 |
| **Step 7** | ❌ **비권장** | 강제 사용, 품질 저하 |

## 🎯 권장 사용 범위

### 최우선 권장: Step 0~1
- **Step 0**: 기본 조건 (10점 이상)
- **Step 1**: 지표 약간 완화 (10점 이상)
- **예상 성과**: 평균 +3% 이상

### 조건부 권장: Step 2~3
- **Step 2**: 점수 완화 (8점 이상)
- **Step 3**: 지표 추가 완화 (8점 이상)
- **예상 성과**: 평균 +1~2%
- **조건**: Step 0~1에서 목표 미달 시에만 사용

### 비권장: Step 4~7
- **Step 4~6**: 과도한 완화
- **Step 7**: 강제 사용
- **예상 성과**: 평균 +0.8% 이하
- **권장**: 사용하지 않음

## 📝 결론

### **Step 0~1까지가 가장 유효함** ✅

**이유**:
1. **Step 0**: 검증 결과 평균 +3.26% (우수)
2. **Step 1**: Step 0와 유사한 설정으로 유효성 예상
3. **Step 2~3**: 조건부 사용 가능하나 품질 저하 가능
4. **Step 4~7**: 과도한 완화로 품질 저하

### 권장 조치

1. **Step 0~1 우선 사용**: 기본 조건과 약간의 완화만 허용
2. **Step 2~3 제한적 사용**: 목표 미달 시에만 사용
3. **Step 4~7 사용 금지**: 품질 저하 방지
4. **목표 미달 시 빈 리스트**: Step 3에서도 목표 미달이면 빈 리스트 반환

### 최종 권장사항

**Step 0~3까지 사용, Step 4 이상은 사용하지 않음**

- **Step 0**: 기본 조건 (최우선)
- **Step 1**: 약간 완화 (우선)
- **Step 2**: 점수 완화 (조건부)
- **Step 3**: 지표 추가 완화 (조건부)
- **Step 4~7**: 사용 금지

