# 승률 개선 계획

## 현재 상황 (최근 60일 데이터 기준)

### 현재 전략 성과
- **손절**: -7% (5일 후부터 적용)
- **익절**: +3%
- **보존**: +1.5%
- **최소 보유**: 5일
- **최대 보유**: 45일
- **승률**: **75.5%** ✅ (이전 62.5%보다 +13%p 향상!)
- **평균 수익률**: +1.34%
- **익절률**: 68.9% (71개)
- **손절률**: 22.3% (23개)
- **손익비**: 0.45:1 ⚠️ (낮음 - 개선 필요)
- **평균 수익**: +2.92%
- **평균 손실**: -6.47%

### 문제점
1. **손익비가 낮음**: 0.45:1 (평균 손실이 평균 수익보다 큼)
2. **평균 손실이 큼**: -6.47% (손절 -7% 기준)
3. **익절이 빠름**: 평균 2.8일 (더 많은 수익 기회 상실)

## 개선 방안

### 방안 1: 점수 기준 상향 (10점 이상만 추천) ⭐ **최우선**
**현재**: 8점 이상 추천
**개선**: 10점 이상만 추천
**효과**:
- 품질 향상 (고품질 종목만 선택)
- 승률 상승 기대 (75.5% → 80% 이상)
- 손절률 감소 기대
- 평균 수익률 상승 기대

**단점**:
- 추천 종목 수 감소 (약 30-40% 감소 예상)
- 일부 날짜 스캔 실패 가능

**구현**: `scanner.py`에서 10점 이상만 `match=True`로 설정

### 방안 2: 손절 기준 조정 (-6%) ⭐ **즉시 적용 가능**
**현재**: -7% (5일 후부터)
**개선**: -6% (5일 후부터)
**효과**:
- 손실 감소 (-6.47% → -5.58%)
- 손익비 개선 (0.45:1 → 0.53:1)
- 승률 유지 (75.5% → 74.5%, 소폭 하락)

**단점**:
- 조기 손절 가능성 (소폭 증가)

**구현**: `validate_trading_strategy.py` 및 실제 전략 적용

### 방안 3: 트레일링 스탑 도입 ⭐ **장기 개선**
**현재**: +3% 고정 익절
**개선**: +3% 도달 후 트레일링 스탑 (2% 하락 시 매도)
**효과**:
- 더 많은 수익 실현 (평균 수익 +2.92% → +3.5% 이상)
- 승률 상승 기대 (75.5% → 78% 이상)
- 평균 수익률 상승 기대 (+1.34% → +2.0% 이상)

**단점**:
- 구현 복잡도 증가
- 키움증권 자동감시매도 기능 활용 필요

**구현**: `auto_monitoring_service.py`에 트레일링 스탑 로직 추가

### 방안 4: 익절 기준 조정 (+4%)
**현재**: +3%
**개선**: +4%
**효과**:
- 평균 수익 상승 (+2.92% → +3.5% 이상)
- 손익비 개선 기대

**단점**:
- 익절률 감소 가능 (68.9% → 60% 이하)
- 승률 하락 가능 (75.5% → 70% 이하)

**검증 필요**: 백테스트로 효과 확인

### 방안 5: 시장 상황별 전략 분리
**강세장**:
- 익절: +4%
- 손절: -6%
- 더 적극적

**중립장**:
- 현재 전략 유지

**약세장**:
- 익절: +2%
- 손절: -8%
- 보수적

**효과**:
- 시장 상황에 맞는 최적화
- 전체 성과 향상

**단점**:
- 구현 복잡도 높음
- 시장 상황 판단 정확도 필요

## 권장 개선 계획

### 1단계: 즉시 적용 (점수 기준 상향 + 손절 조정)
1. **10점 이상만 추천**: `scanner.py` 수정
2. **손절 -6%**: 전략 파라미터 조정
3. **검증**: 최근 60일 데이터로 재검증

**기대 효과**:
- 승률: 75.5% → 78% 이상
- 평균 수익률: +1.34% → +1.5% 이상
- 손익비: 0.45:1 → 0.55:1 이상
- 평균 손실: -6.47% → -5.5% 이하

### 2단계: 중기 개선 (트레일링 스탑 도입)
1. **트레일링 스탑 로직 개발**: `auto_monitoring_service.py`
2. **시뮬레이션 검증**: 실제 데이터로 효과 검증
3. **적용**: 검증 완료 후 적용

**기대 효과**:
- 승률: 78% → 80% 이상
- 평균 수익률: +1.5% → +2.0% 이상
- 손익비: 0.55:1 → 0.70:1 이상
- 평균 수익: +2.92% → +3.5% 이상

### 3단계: 장기 개선 (시장 상황별 전략)
1. **시장 상황 분석 강화**: `market_analyzer.py`
2. **전략 분리 로직 개발**: 시장 상황별 파라미터 적용
3. **검증**: 강세장/약세장별 성과 분석

**기대 효과**:
- 승률: 80% → 85% 이상
- 평균 수익률: +2.0% → +2.5% 이상
- 손익비: 0.70:1 → 0.85:1 이상

## 즉시 적용할 개선 사항

### 1. 점수 기준 상향 (10점 이상만 추천)
```python
# scanner.py
if score >= 10:
    flags["label"] = "강한 매수"
    flags["match"] = True
elif score >= 8:
    flags["label"] = "매수 후보 (제외)"
    flags["match"] = False  # 8-9점은 제외
```

### 2. 손절 기준 조정 (-6%)
```python
# config.py 또는 전략 파라미터
stop_loss_pct = -6.0  # -7.0에서 변경
```

### 3. config.py 업데이트
```python
score_level_strong: int = 10  # 8에서 변경
score_level_watch: int = 8  # 5에서 변경
```

## 검증 계획

1. **10점 이상만 추천 검증**: 최근 60일 데이터로 재검증
2. **손절 -6% 검증**: 다양한 손절 기준으로 백테스트
3. **트레일링 스탑 시뮬레이션**: 실제 데이터로 효과 검증
4. **종합 검증**: 모든 개선안을 종합하여 최종 검증

## 예상 최종 성과

### 개선 전 (현재)
- 승률: 75.5%
- 평균 수익률: +1.34%
- 손익비: 0.45:1
- 평균 수익: +2.92%
- 평균 손실: -6.47%

### 개선 후 (1단계 + 2단계)
- 승률: **80% 이상** (+4.5%p)
- 평균 수익률: **+2.0% 이상** (+0.66%p)
- 손익비: **0.70:1 이상** (+0.25)
- 평균 수익: **+3.5% 이상** (+0.58%p)
- 평균 손실: **-5.5% 이하** (-0.97%p)

## 결론

현재 승률 75.5%는 이미 양호한 수준이지만, 손익비 개선이 필요합니다. 주요 개선 방안은:

1. **점수 기준 상향** (10점 이상만 추천): 가장 효과적이고 구현이 쉬움
2. **손절 기준 조정** (-6%): 손실 감소, 손익비 개선
3. **트레일링 스탑 도입**: 더 많은 수익 실현

이러한 개선을 통해 승률 80% 이상, 평균 수익률 +2.0% 이상, 손익비 0.70:1 이상 달성이 가능할 것으로 예상됩니다.

