# 유동성 필터 설명

## 유동성이란?

**유동성(Liquidity)**은 주식을 **쉽게 사고팔 수 있는 정도**를 의미합니다.

### 핵심 개념

**"이 종목을 매수/매도할 때 가격 변동 없이 거래할 수 있는가?"**

- 유동성이 높으면 → 거래가 활발함, 가격 변동 적음
- 유동성이 낮으면 → 거래가 적음, 가격 변동 큼

## 유동성 측정 방법

### 거래대금 (Turnover)

**거래대금 = 주가 × 거래량**

- 하루 거래대금: 당일 종가 × 당일 거래량
- 평균 거래대금: 최근 N일 거래대금의 평균

**예시:**
```
종목 A:
- 종가: 10,000원
- 거래량: 100,000주
- 거래대금: 10,000 × 100,000 = 10억원

종목 B:
- 종가: 1,000원
- 거래량: 50,000주
- 거래대금: 1,000 × 50,000 = 5천만원
```

## 유동성 필터의 목적

### 왜 필요한가?

1. **거래 실행 어려움**
   - 유동성이 낮으면 매수/매도 주문이 체결되지 않을 수 있음
   - 특히 대량 매도 시 가격이 크게 하락할 수 있음

2. **가격 조작 위험**
   - 유동성이 낮으면 소량의 거래로도 가격이 크게 변동
   - 펌프앤덤프 등 조작 가능성

3. **손절 어려움**
   - 손실이 발생해도 매도하기 어려움
   - 유동성 부족으로 더 큰 손실 가능

4. **데이터 신뢰성**
   - 거래가 적으면 가격 데이터가 신뢰하기 어려움
   - 기술적 지표의 정확도 저하

## 현재 유동성 필터 설정

### 조건

```python
# 최근 20일 평균 거래대금 계산
avg_turnover = (close × volume).mean()  # 최근 20일

# 필터 조건
if avg_turnover < min_turnover_krw:
    return None  # 즉시 제외
```

### 설정값

- **min_turnover_krw**: 10,000,000원 (1천만원)
- **기간**: 최근 20일 평균

### 의미

**최근 20일 동안 하루 평균 거래대금이 1천만원 이상인 종목만 통과**

**예시:**
```
종목 A (통과):
- 최근 20일 평균 거래대금: 5억원
- 1천만원 이상 → 통과 ✅

종목 B (차단):
- 최근 20일 평균 거래대금: 500만원
- 1천만원 미만 → 차단 ❌
```

## 실제 적용 예시

### 통과하는 종목

```
삼성전자 (005930):
- 최근 20일 평균 거래대금: 약 1,000억원
- 1천만원 이상 → 통과 ✅
```

### 차단되는 종목

```
소형주 (예시):
- 최근 20일 평균 거래대금: 약 500만원
- 1천만원 미만 → 차단 ❌
```

## 11월 17일 스캔 현황

### 유동성 필터 결과

- **통과**: 대부분 종목 통과
- **차단**: 거의 없음 (0-1%)

### 이유

- 유니버스가 KOSPI/KOSDAQ 상위 종목으로 구성
- 상위 종목들은 대부분 유동성이 높음
- 1천만원 기준은 매우 낮은 편

## 유동성 필터 조정 방안

### 현재 설정 (1천만원)

**장점:**
- 거의 모든 종목 통과
- 필터링 효과 거의 없음

**단점:**
- 너무 낮은 기준
- 소형주도 통과 가능

### 완화 (500만원)

- 더 많은 종목 통과
- 소형주 포함 가능성 증가

### 강화 (1억원)

- 대형주만 통과
- 유동성 확보
- 종목 수 감소

### 권장 설정

**현재 유니버스 기준:**
- KOSPI/KOSDAQ 상위 종목 → 1천만원은 너무 낮음
- **권장**: 1억원 이상으로 강화 고려

## 유동성 vs 거래량

### 차이점

**거래량 (Volume)**
- 주식의 개수 (주)
- 예: 100,000주

**거래대금 (Turnover)**
- 주가 × 거래량 (원)
- 예: 10억원

### 왜 거래대금을 사용하나?

**거래량만으로는 부족:**
```
종목 A: 1,000원 × 100,000주 = 1억원
종목 B: 10,000원 × 10,000주 = 1억원

거래량: A가 10배 많음
거래대금: 동일

→ 거래대금이 더 정확한 유동성 지표
```

## 요약

- **유동성 = 거래하기 쉬운 정도**
- **측정 = 최근 20일 평균 거래대금**
- **기준 = 1천만원 이상**
- **현재 상태 = 거의 차단 없음 (대부분 통과)**
- **문제 없음 = 유동성 필터는 11월 17일 스캔 0개 원인이 아님**

