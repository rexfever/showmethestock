# 갭(Gap) vs 이격(Extension) 차이 설명

## 🎯 핵심 차이

### 갭 (Gap)
**두 이동평균선 사이의 거리**
- TEMA20(장기선)과 DEMA10(단기선) 사이의 간격
- **추세의 강도**를 나타냄

### 이격 (Extension)
**현재가와 이동평균선 사이의 거리**
- 현재가와 TEMA20(장기선) 사이의 간격
- **과매수 여부**를 나타냄

## 📊 구체적인 예시

### 예시 1: 갭이 크고 이격이 작은 경우

```
현재가: 10,000원
TEMA20: 9,900원 (장기선)
DEMA10: 9,700원 (단기선)

갭(Gap) = (9,900 - 9,700) / 10,000 = 2.0%
이격(Extension) = (10,000 - 9,900) / 9,900 = 1.01%
```

**해석:**
- **갭 2.0%**: 두 선이 멀리 떨어져 있음 → 추세가 강함 ✅
- **이격 1.01%**: 현재가가 TEMA20에 가까움 → 과매수 아님 ✅
- **상태**: 강한 상승 추세 초입 단계 (매수 적기)

### 예시 2: 갭이 작고 이격이 큰 경우

```
현재가: 10,500원
TEMA20: 9,900원 (장기선)
DEMA10: 9,850원 (단기선)

갭(Gap) = (9,900 - 9,850) / 10,500 = 0.48%
이격(Extension) = (10,500 - 9,900) / 9,900 = 6.06%
```

**해석:**
- **갭 0.48%**: 두 선이 가까움 → 추세가 약함 ⚠️
- **이격 6.06%**: 현재가가 TEMA20에서 많이 떨어져 있음 → 과매수 상태 ❌
- **상태**: 이미 많이 올라서 추격하기 위험함 (매수 비추천)

### 예시 3: 갭이 크고 이격도 큰 경우

```
현재가: 10,500원
TEMA20: 9,900원 (장기선)
DEMA10: 9,700원 (단기선)

갭(Gap) = (9,900 - 9,700) / 10,500 = 1.9%
이격(Extension) = (10,500 - 9,900) / 9,900 = 6.06%
```

**해석:**
- **갭 1.9%**: 두 선이 멀리 떨어져 있음 → 추세가 강함 ✅
- **이격 6.06%**: 현재가가 TEMA20에서 많이 떨어져 있음 → 과매수 상태 ❌
- **상태**: 강한 추세이지만 이미 많이 올라서 추격 위험 (매수 비추천)

### 예시 4: 갭이 작고 이격도 작은 경우

```
현재가: 9,950원
TEMA20: 9,900원 (장기선)
DEMA10: 9,850원 (단기선)

갭(Gap) = (9,900 - 9,850) / 9,950 = 0.5%
이격(Extension) = (9,950 - 9,900) / 9,900 = 0.51%
```

**해석:**
- **갭 0.5%**: 두 선이 가까움 → 추세가 약함 ⚠️
- **이격 0.51%**: 현재가가 TEMA20에 가까움 → 과매수 아님 ✅
- **상태**: 추세가 불명확하거나 초기 단계 (매수 신중)

## 🎨 시각적 설명

### 갭 (Gap) - 두 선 사이의 거리

```
가격
 ↑
 │     현재가 (10,000원)
 │     ●
 │    ╱│
 │   ╱ │  ← 이격 (현재가와 TEMA20 사이)
 │  ╱  │
 │ ╱   │
 │╱    │
 │─────┼───── TEMA20 (9,900원) ← 장기선
 │     │
 │     │
 │     └───── DEMA10 (9,700원) ← 단기선
 │            ↑
 │            └─ 갭 (TEMA20과 DEMA10 사이)
 │
 └─────────────────────────────→ 시간
```

### 이격 (Extension) - 현재가와 선 사이의 거리

```
가격
 ↑
 │     현재가 (10,500원) ●
 │                      │
 │                      │ ← 이격 (현재가가 TEMA20에서 떨어진 거리)
 │                      │
 │──────────────────────┼───── TEMA20 (9,900원)
 │                      │
 │                      │
 │                      │
 │                      │
 └──────────────────────┴─────→ 시간
```

## 🔍 왜 둘 다 필요한가?

### 갭만으로는 부족한 이유

**갭이 크다** = 추세가 강함
- 하지만 이미 많이 올랐을 수도 있음
- 이격을 확인해야 추격 여부를 판단 가능

### 이격만으로는 부족한 이유

**이격이 작다** = 과매수 아님
- 하지만 추세가 약할 수도 있음
- 갭을 확인해야 추세 강도를 판단 가능

### 둘 다 확인해야 하는 이유

1. **갭**: 추세의 강도 확인 (골든크로스 상태의 강도)
2. **이격**: 과매수 여부 확인 (추격 위험 여부)

**둘 다 적정 범위 내에 있어야 매수 적기**

## 📊 필터 조건

### 갭 필터
```
gap_min (0.2%) <= gap_now <= gap_max (2.5%)
```

**의미:**
- 갭이 너무 작으면: 추세 불명확 → 제외
- 갭이 너무 크면: 이미 추세 진행됨 → 제외

### 이격 필터
```
ext_pct <= ext_from_tema20_max (2.5%)
```

**의미:**
- 이격이 너무 크면: 과매수 상태 → 제외 (추격 방지)

## 🎯 요약

| 구분 | 갭 (Gap) | 이격 (Extension) |
|------|----------|------------------|
| **의미** | 두 이동평균선 사이의 거리 | 현재가와 이동평균선 사이의 거리 |
| **측정 대상** | TEMA20 - DEMA10 | 현재가 - TEMA20 |
| **의미** | 추세의 강도 | 과매수 여부 |
| **목적** | 추세 불명확한 종목 제외 | 추격 위험 종목 제외 |
| **장세별 차별화** | 필요함 (추세 강도와 관련) | 불필요할 수 있음 (과매수는 장세 무관) |

## 💡 실전 예시

### 좋은 매수 타이밍
```
갭: 1.5% (추세 강함) ✅
이격: 1.0% (과매수 아님) ✅
→ 매수 적기
```

### 나쁜 매수 타이밍
```
갭: 0.3% (추세 약함) ❌
또는
이격: 4.0% (과매수 상태) ❌
→ 매수 비추천
```

